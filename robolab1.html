<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>mehamasum.com</title>
    <script src="lib/jquery.min.js"></script>
    <link rel="stylesheet" href="lib/screen.css" type="text/css"/>
    <link rel="stylesheet" href="lib/theme.css" type="text/css"/>
    <link rel="stylesheet" href="lib/theme-fixes.css" type="text/css"/>
    <link rel="stylesheet" href="lib/github.min.css"/>
    <link href="lib/jquery.contextMenu.css" rel="stylesheet" type="text/css" />
    <script src="lib/jquery.contextMenu.js" type="text/javascript"></script>
    <script src="lib/jquery.ui.position.min.js" type="text/javascript"></script>
    <script src="lib/main.js" type="text/javascript"></script>

	<style>
	html,body {  
        font-family: "consolas", Times, serif; font-size: 12px;
        background:#fff; height:100%; margin:0; padding:0; overflow:hidden; 
    }
	canvas { position:absolute; top:0; left:0 }
    img { position:absolute; }
    .draggable:hover { cursor: move; }
	</style>
</head>


<body>

	<!--move-->
    <script>
        $(function(){
            $.contextMenu({
                selector: '.move_dropdownbase', 
                trigger: 'left',
                callback: function(key, options) {
                    var txt = document.getElementById("move_option_text");
                    var code = document.getElementById("post_code");
                    console.log(txt);
                    if (key=="0") {
                        txt.textContent= "forward";
                        code.value = code.value.replace("mb","mf");
                    }
                    else if (key=="1") {
                        txt.textContent= "backword";
                        code.value = code.value.replace("mf","mb");
                    }
                    console.log(txt.textContent);
                },
                items: {
                    "0": {name: "forward"},
                    "1": {name: "backword"}
                }
            });
        });
    </script>

	<!--turn-->
    <script>
		$(function(){
			$.contextMenu({
			selector: '.turnVal',
			trigger: 'left',
			callback: function(key,options){
				var trn = document.getElementById("turnT");
                var code = document.getElementById("post_code");

	            console.log(trn);
				if(key=="0"){
					trn.textContent="left";
                    code.value = code.value.replace("tr","tl");
				}
				else if(key=='1')
					trn.textContent="right";
                    code.value = code.value.replace("tl","tr");
                },
				items:{
					"0":{name: "left"},
					"1":{name: "right"}
				}
			});
		});
	</script>


    <svg id="svg" width="600" height="400">

        <rect x="5" y="5" width="590" height="390" stroke="#ff0099" stroke-width="5" fill="none" ></rect>

        <g id="move_shape" class="draggable" transform="translate(100,100)">

            <path id="move_base" fill="#5ba58c" 
                    d="
                    m 0,8 
                    A 8,8 0 0,1 8,0
                    H 15 
                    l 6,4 3,0 6,-4
                    H 150 
                    v 30
                    H 29.5
                    l -6,4 -3,0 -6,-4
                    H 8 a 8,8 0 0,1 -8,-8 
                    z
                    ">
        
            </path>

            <text x="20" y="18" fill="#fff">move</text>

            <g class="move_dropdownbase" >
                <rect x="60" y="5"  rx="4" ry="4" fill="#fff" height="20" width="80"></rect>
                <text x="67" y="18" class="move_option">
                    <tspan id="move_option_text" style="fill: rgb(91, 128, 165);">
                    forward
                    </tspan>
                    <tspan style="fill: rgb(91, 128, 165);">
                    ▾
                    </tspan>
                </text>
            </g>

            </g>
        </g>

        <g id="turn_shape" class="draggable" transform="translate(250,200)">
			<g id="turn">
			
			<path d="
			    m0,0
				h15
				a5.5,5.5 0 1,0 8,0
				h120
				v30
				h-120
				a5.5,5.5 0 1,1 -8,0
				h-15
				v-30
				"
				style="
				fill:#5ba58c;"
				/>
				<text x="15" y="23" fill=white >turn</text>
			</g>
			<g class="turnVal">
				<rect x="50" y="10" rx="4" ry="4" fill=white height="15" width="55"></rect>
				<text x="55" y="20" fill=black class="turnText">
					<tspan id="turnT">
		                    left
		            </tspan>
		            <tspan>
		                ▾                    
					</tspan>
				</text>
				
			</g>
		</g>

    </svg>







    <script>
    var f = function(){

        function Draggable(element){
            this.element = element;



            var self = this;

            var move = function(event){

                self.element.style.stroke = "#ffee00";
                if(self.dragStart != undefined){ self.dragStart();}

                //console.log(event);

                //don't bubble this event - mousedown
                event.stopPropagation();
                //prevent any default action
                event.preventDefault();

                var original = self.element.getAttribute("transform");
                original = original.slice(10, -1).split(',');
                //console.log(original);

                var originalLeft=parseInt(original[0]), originalTop=parseInt(original[1]);
                //var originalLeft = parseInt(window.getComputedStyle(this).x);
                //var originalTop = parseInt(window.getComputedStyle(this).y);
                //console.log("> "+originalLeft);
                //console.log("> "+originalTop);

                var mouseDownX = event.clientX;
                var mouseDownY = event.clientY;
                //console.log(">> "+mouseDownX);
                //console.log(">> "+mouseDownY)

                function dragMe(event){
                    var translated = "translate("+ (originalLeft + event.clientX - mouseDownX) + "," + (originalTop + event.clientY - mouseDownY) + ")";
                    //console.log(translated);
                    self.element.setAttribute("transform", translated);
                    event.stopPropagation();
                }

                function dropMe(event){
                    document.removeEventListener('mousemove',dragMe,true);
                    document.removeEventListener('mouseup',dropMe,true);
                    if(self.dragDrop !== undefined){ self.dragDrop();}
                    event.stopPropagation();

                    self.element.style.stroke = "none";
                }

                document.addEventListener('mouseup',dropMe,true);
                document.addEventListener('mousemove',dragMe,true);

            };

            this.element.addEventListener('mousedown',move,false);

        }


        var move_shape = document.getElementById("move_shape");
        new Draggable(move_shape);

        var turn_shape = document.getElementById("turn_shape");
        new Draggable(turn_shape);


    };

    window.addEventListener('load', f ,false);
    </script>

    <form action="/" method="POST">
      <input id="post_code" type="text" name="code" value="mf tl">
      <input type="submit" value="Submit">
    </form>


</body>
</html>